#include "messages.h"
#include <string.h>


//////////////////////////////////////////////////////////////////////////////////////////
// Help
//////////////////////////////////////////////////////////////////////////////////////////
int isHelp(char* input) {
    return strcmp(input, "?") == 0 || strcmp(input, "h") == 0 || strcmp(input, "help") == 0;
}

//////////////////////////////////////////////////////////////////////////////////////////
// Exit
//////////////////////////////////////////////////////////////////////////////////////////
int isExit(char* input) {
    return strcmp(input, "e") == 0 || strcmp(input, "exit") == 0;
}

int confirmIfUserWantsToExit(void) {
    char* exitInput;
    exitInput = readline(msgExit);
    
    if (strcmp(exitInput, "y") == 0 || strcmp(exitInput, "yes") == 0)
        return -1;
    return 0;
}

//////////////////////////////////////////////////////////////////////////////////////////
// Forge
//////////////////////////////////////////////////////////////////////////////////////////
int isForge(char* input) {
    if (strlen(input) < 5)
        return 0;
    return input[0] == 'f' && input[1] == 'o' && input[2] == 'r' && input[3] == 'g' && input[4] == 'e';
}

//////////////////////////////////////////////////////////////////////////////////////////
// LS
//////////////////////////////////////////////////////////////////////////////////////////
int isLS(char* input) {
    return strcmp(input, "ls") == 0 || strcmp(input, "dir") == 0;
}

//////////////////////////////////////////////////////////////////////////////////////////
// Remove
//////////////////////////////////////////////////////////////////////////////////////////
int isRM(char* input) {
    return strcmp(input, "rm") == 0;
}

//////////////////////////////////////////////////////////////////////////////////////////
// Use
//////////////////////////////////////////////////////////////////////////////////////////
int isUse(char* input) {
    return strcmp(input, "use") == 0 || strcmp(input, "u") == 0;
}

//////////////////////////////////////////////////////////////////////////////////////////
// C2
//////////////////////////////////////////////////////////////////////////////////////////
int parseC2(char *input) {
    if (isExit(input))                         // Exit
        return confirmIfUserWantsToExit();
    else if (isForge(input))                   // Forge
        processForgeInput(input);
    else if (isHelp(input))                    // Help
        printf("%s", msgForgeHelp);
    else if (isLS(input))                      // LS
        printf("LS\n");                        // TODO Implement
    else if (isRM(input))                      // RM
        printf("rm\n");                        // TODO Implement
    else if (isUse(input))                     // Use
        printf("Use\n");                       // TODO Implement
    else
        printf("%s", msgInvalid);
    return 0;
}

////////////////////////////////////////////////////////////////////////
// LP Functions
////////////////////////////////////////////////////////////////////////
int parseLP(char *input) {
    return 1;
}

////////////////////////////////////////////////////////////////////////
// Agent Functions
////////////////////////////////////////////////////////////////////////
int parseAgent(char *input) {
    return 2;
}